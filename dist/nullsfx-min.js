export default function nullsfx(t){this.sfx_list=t,this.audioEles={};for(let[t,i]of Object.entries(this.sfx_list)){let n=document.createElement("audio");function e(){n.removeEventListener("ended",e),n.pause(),n.remove()}n.src=i,n.setAttribute("preload","auto"),n.setAttribute("controls","none"),n.volume=0,n.load(),this.audioEles[t]=n,n.addEventListener("ended",e)}this.init()}nullsfx.prototype.init=function(){this.targets=document.querySelectorAll("[nsfx]"),this.targets.forEach((t=>{t.getAttribute("nsfx").trim().split(";").forEach((e=>{let i,n,[s,o]=e.trim().split("?",2);[s,i]=s.trim().split("!",2),[o,n]=o.trim().split("%",2),t.addEventListener(s,(e=>{e.stopPropagation(),"key"===s.substring(0,3)&&i&&e.key!==i||this.play(o,n??t.getAttribute("nsfx-vol"),e)}))}))}))},nullsfx.prototype.play=function(t,e=null,i=null){let n=this.audioEles[t].cloneNode();n.currentTime=0,n.volume=parseFloat(e)??1,n.play(),n.addEventListener("ended",(function t(){n.removeEventListener("ended",t),n.pause(),n.remove()}))};